/*jslint stupid: true*/

$(document).ready(function () {
    /*
    *********************************************************************************************************************************************
    *********************************************************************************************************************************************
    SHOW AND HIDE MENU 
    *********************************************************************************************************************************************
    *********************************************************************************************************************************************
    */
    $(window).scroll(function () {
        if ($(window).scrollTop() < 180) {

            $('.navbar').css({
                'margin-top': '-100px',
                'opacity': '0'
            });

        } else {

            $('.navbar').css({
                'margin-top': '0',
                'opacity': '1'
            });
        }
    });
    /*
    *********************************************************************************************************************************************
    *********************************************************************************************************************************************
    SMOOTH SCROLLING
    *********************************************************************************************************************************************
    *********************************************************************************************************************************************
    */
    $('a[href*="#"]:not([href="#"])').click(function () {
        if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') && location.hostname == this.hostname) {
            var target = $(this.hash);
            target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
            if (target.length) {
                $('html, body').animate({
                    scrollTop: target.offset().top
                }, 1000);
                return false;
            }
        }
    });
    /*
    *********************************************************************************************************************************************
    *********************************************************************************************************************************************
    HIGHLIGHT MENU ITEM ON SCROLL
    *********************************************************************************************************************************************
    *********************************************************************************************************************************************
    */
    $(window).scroll(function () {
        $('section').each(function () {
            var bb = $(this).attr("id");
            var hei = $(this).outerHeight();
            var grttop = $(this).offset().top - 70;

            if ($(window).scrollTop() > grttop && $(window).scrollTop() < grttop + hei) {
                $(".navbar-nav li a[href='#" + bb + "']").parent().addClass('active');
            } else {
                $(".navbar-nav li a[href='#" + bb + "']").parent().removeClass('active');
            }
        });
    });
    /*
    *********************************************************************************************************************************************
    *********************************************************************************************************************************************
    ADD AUTO PADDING TO HEADER
    *********************************************************************************************************************************************
    *********************************************************************************************************************************************
    */
    setInterval(function () {
        var windowHeight = $(window).height();
        var containerHeight = $('.header-container').height();
        var padTop = windowHeight - containerHeight;

        $('.header-container').css({
            'padding-top': Math.round(padTop / 2) + 'px',
            'padding-bottom': Math.round(padTop / 2) + 'px'
        });
    }, 10);
    /*
    *********************************************************************************************************************************************
    *********************************************************************************************************************************************
    dxSlider : EXTERNAL RESOURCES   
    *********************************************************************************************************************************************
    *********************************************************************************************************************************************
    */
    $('.bxslider').bxSlider({
        slideWidth: 293,
        auto: true,
        maxSlides: 3,
        slideMargin: 50
    });
    /*
    *********************************************************************************************************************************************
    *********************************************************************************************************************************************
    Counter : EXTERNAL RESOURCES
    *********************************************************************************************************************************************
    *********************************************************************************************************************************************
    */
    $('.Counter-num').counterUp({
        delay: 10,
        time: 1500
    });
    /*
    *********************************************************************************************************************************************
    *********************************************************************************************************************************************
    ANIMATION
    *********************************************************************************************************************************************
    *********************************************************************************************************************************************
    */
    //Hide and Wait for Animation Call
    var items = document.getElementsByClassName("playAni");
    for (var i = 0; i < items.length; i++) {
        $(items[i]).addClass("playHide");
    }
    //Show, Animate and Take Care of Durations and Delays
    var waypoints = $(".playAni").waypoint(function (direction) {
        var playCall = $(this.element).attr("data-play-animation");
        //Take Care of Durations, Delays and Repetitions
        var play_duration = '1s';
        var play_delay = '0s';
        if ($(this.element).attr("data-play-duration")) {
            play_duration = $(this.element).attr("data-play-duration");
        }
        if ($(this.element).attr("data-play-delay")) {
            play_delay = $(this.element).attr("data-play-delay");
        }

        $(this.element).css({
            "-webkit-animation-duration": play_duration,
            "-moz-animation-duration": play_duration,
            "webkit-animation-delay": play_delay,
            "moz-animation-delay": play_delay
        });
        if ($(this.element).attr("data-play-iteration")) {
            $(this.element).css({
                "webkit-animation-iteration-count": $(this.element).attr("data-play-iteration"),
                "moz-animation-iteration-count": $(this.element).attr("data-play-iteration")
            });
        }

        //Take Care of Animation
        $(this.element).removeClass("playHide");
        $(this.element).addClass("animated " + playCall);
    }, {
        offset: '70%'
    });    
});
